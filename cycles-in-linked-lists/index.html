
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Cycles in Linked Lists</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=bbdc542dbc">
    <link rel="stylesheet" type="text/css" href="../assets/built/prism-onedark.css?v=bbdc542dbc">

    <meta name="description" content="Cycles. Find them, traverse them, break them.">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="Intuitive Coding">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Cycles in Linked Lists">
    <meta property="og:description" content="Cycles in linked lists are common interview questions. They're hard to reason through if you haven't seen them before, so it's good to be prepared for them ahead of time.">
    <meta property="og:url" content="http://localhost:2369/cycles-in-linked-lists/">
    <meta property="og:image" content="http://localhost:2369/content/images/2017/08/cycle-1.gif">
    <meta property="article:tag" content="algorithms">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Cycles in Linked Lists">
    <meta name="twitter:description" content="Cycles in linked lists are common interview questions. They're hard to reason through if you haven't seen them before, so it's good to be prepared for them ahead of time.">
    <meta name="twitter:url" content="http://localhost:2369/cycles-in-linked-lists/">
    <meta name="twitter:image" content="http://localhost:2369/content/images/2017/08/cycle-1.gif">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Zachary Bluedorn">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="algorithms">
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="338">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Intuitive Coding",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2369/content/images/2017/08/ic_icon-1.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Zachary Bluedorn",
        "sameAs": []
    },
    "headline": "Cycles in Linked Lists",
    "url": "http://localhost:2369/cycles-in-linked-lists/",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2369/content/images/2017/08/cycle-1.gif",
        "width": 600,
        "height": 338
    },
    "keywords": "algorithms",
    "description": "Cycles in linked lists are common interview questions. They&#x27;re hard to reason through if you haven&#x27;t seen them before, so it&#x27;s good to be prepared for them ahead of time.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2369/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.min.js?v=bbdc542dbc"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "caed91e1fbe1"
});
</script>
    <meta name="generator" content="Ghost 1.6">
    <link rel="alternate" type="application/rss+xml" title="Intuitive Coding" href="../rss/index.html">
    <link href="https://fonts.googleapis.com/css?family=Montserrat%7CQuicksand%7CRoboto+Mono" rel="stylesheet">
<style>
    /* Main title formatting: "Intuitive Coding" */
    .site-header:before {
        background: none;
    }
    .site-title {
        img {
        	display: none;
        }
        font-family: Montserrat;
  		text-shadow: -3px 2px 0 #3a50d9;
    }
    .site-description {
        
        border-radius: 2px;
        padding: 15px 15px;
        background: rgba(0,0,0,.5);
        text-shadow: -1px 1px 2px rgba(15, 15, 15, 0.9);
    }
    
    /* Prismjs adds backgrounds to tokens - this removes them */
    .token.operator,
	.token.entity,
	.token.url,
	.language-css .token.string,
	.style .token.string {
    	background: none;
    }
</style>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102491437-2', 'auto');
  ga('send', 'pageview');

</script>

</head>
<body class="page-template page-cycles-in-linked-lists tag-algorithms">

    <div class="site-wrapper">

        
<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../"><img src="../content/images/2017/08/ic_icon-1.png" alt="Intuitive Coding"></a>
            <ul class="nav">
    <li class="nav-blog" role="presentation"><a href="../tag/me/">Blog</a></li>
    <li class="nav-data-structures" role="presentation"><a href="../data-structures/">Data Structures</a></li>
    <li class="nav-algorithms" role="presentation"><a href="../algos/">Algorithms</a></li>
</ul>
    </div>
    <div class="site-nav-right">
        <div class="social-links">
        </div>
            <a class="rss-button" href="http://cloud.feedly.com/#subscription/feed/http://localhost:2369/rss/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-algorithms page ">

            <header class="post-full-header">
                <h1 class="post-full-title">Cycles</h1>
            </header>

            <figure class="post-full-image" style="background-image: url(../content/images/2017/08/cycle-1.gif)">
            </figure>

            <section class="post-full-content">
                <div class="kg-card-markdown"><p>Cycles in linked lists are common interview questions. They're hard to reason through if you haven't seen them before, so it's good to be prepared for them ahead of time.</p>
<p>The three basic questions are:</p>
<ol>
<li><a href="index.html#howcanwetellifalinkedlisthasacycle">How can we tell if a linked list has a cycle?</a></li>
<li><a href="index.html#howcanwefindthelengthofthecycle">How can we find the size of the cycle?</a></li>
<li><a href="index.html#howcanwebreakthecycle3">How can we break the cycle?</a></li>
</ol>
<p>We'll answer these questions using the <strong>hare and tortoise</strong> method, which is a simple problem solving technique that has a surprisingly wide range of uses.</p>
<h3 id="howcanwetellifalinkedlisthasacycle">How can we tell if a linked list has a cycle?</h3>
<p>To find out if our linked list has a cycle, we send out the hare (<code>fastPointer</code>) and tortoise (<code>slowPointer</code>) into the list.</p>
<p>If there's no cycle, we'll eventually end up at an <code>undefined</code> node, at which case we're at the end of the list and can return <code>false</code>.</p>
<p>If there is a cycle, the <code>fastPointer</code> <em>must</em> eventually end up at the same node as the <code>slowPointer</code>, which means we can return <code>true</code>. Realizing this takes some effort, but if you think about it hard enough you will convince yourself that it's true. Try drawing it out on paper and splitting the cycle up into two cases: one of odd length, and one of even length.</p>
<p>The code for <code>hasCycle</code> flows from this single idea.</p>
<pre><code class="language-javascript">function hasCycle(list) {
  
  let fastPointer = list,
      slowPointer = list
  
  while (fastPointer &amp;&amp; fastPointer.tail) {
    fastPointer = fastPointer.tail.tail
    slowPointer = slowPointer.tail
    
    if (fastPointer === slowPointer)
      return true
  }
  
  return false
}
</code></pre>
<hr>
<h3 id="howcanwefindthelengthofthecycle">How can we find the length of the cycle?</h3>
<p>So now we know that the list has a cycle. How do we find out how big it is?</p>
<p>The solution is to get our two pointers somewhere in the middle of the cycle. We don't know where it starts, so we need to use the same strategy as before to find the cycle.</p>
<p>Once we know we're in the cycle, all we have to do  is move one pointer through the cycle and count how far we go until we get back to where we started.</p>
<pre><code class="language-javascript">function cycleLength (list) { 
  let fastPointer = list.tail,
      slowPointer = list,
      length
  
  // Move our pointers into the cycle
  while (fastPointer !== slowPointer) {
    fastPointer = fastPointer.tail.tail
    slowPointer = slowPointer.tail
  }
  
  // Loop around the cycle and count the nodes
  length = 1
  fastPointer = fastPointer.tail
  while (fastPointer !== slowPointer) {
    fastPointer = fastPointer.tail
    length += 1
  }
  
  return length
}
</code></pre>
<hr>
<h3 id="howcanwebreakthecycle">How can we break the cycle?</h3>
<p>This question is tricky. We don't have a way to jump straight to that node the node that creates the cycle, so we need to find it in a roundabout way.</p>
<p>Here's how it works.</p>
<ol>
<li>Use the <code>cycleLength</code> to find the start of the cycle. We can do this with two steps:</li>
</ol>
<ul>
<li>Move <code>fastPointer</code> forward <code>cycleLength</code> times</li>
<li>Increment each pointer until they're at the same node, at which point we know we've got the start of the cycle</li>
</ul>
<ol start="2">
<li>Move one of the pointers (may as well be <code>fastPointer</code>) around the loop <code>cycleLength - 1</code> times, so now it's pointing to the end of the cycle</li>
<li>Break the cycle</li>
</ol>
<pre><code class="language-javascript">function breakCycle(list, cycleLength) {
  let fastPointer = list,
      slowPointer = list,
      count
  
  // Advance the fastPointer cycleLength times
  count = cycleLength
  while (count &gt; 0) {
    fastPointer = fastPointer.tail
    count -= 1
  }
  
  // Step each pointer forward to the start of the cycle
  while (fastPointer !== slowPointer) {
    fastPointer = fastPointer.tail
    slowPointer = slowPointer.tail
  }
  
  // Walk forward cycleLength - 1 times to find the end of the cycle
  count = cycleLength - 1
  while (count &gt; 0) {
    fastPointer = fastPointer.tail
    count -= 1
  }
  
  // Break the cycle
  fastPointer.tail = undefined
}
</code></pre>
<hr>
<h3 id="testingoursolutions">Testing our solutions</h3>
<p>First, let's build a simple linked list with a cycle.</p>
<pre><code class="language-javascript">let EMPTY = undefined
let cons = (head, tail) =&gt; {
  return {
    head,
    tail
  }
}
let list = cons(1,
                cons(2,
                     cons(3,
                          cons(4,
                               cons(5, 
                                    EMPTY)))))

list.tail.tail.tail.tail.tail = list.tail.tail
</code></pre>
<p>The node with the <code>5</code> in it points back to the node with the <code>3</code>, creating a cycle of three nodes.</p>
<pre><code class="language-javascript">if (hasCycle(list))
  breakCycle(list, cycleLength(list))

console.log(list)
// { head: 1,
//   tail: { head: 2,
//           tail: { head: 3,
//                   tail: { head: 4,
//                           tail: { head: 5,
//                                   tail: undefined}}}}}
</code></pre>
</div>
            </section>
            
            <section class="post-full-comments">
                <div id="disqus_thread"></div>
                <script>
                    var disqus_config = function () {
                        this.page.url = 'http://localhost:2369/cycles-in-linked-lists/';
                        this.page.identifier = 'ghost-59973cc59fa1f20f15e4588c';
                    };
                    (function() {
                        var d = document, s = d.createElement('script');
                        s.src = 'https://intuitivecoding.disqus.com/embed.js';
                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                </script>
            </section>

        </article>

    </div>
</main>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">Intuitive Coding</a> © 2017</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=bbdc542dbc"></script>
    <script src="../assets/js/prism.js?v=bbdc542dbc"></script>


    <script>
$(function() {
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
});
</script>


    

</body>
